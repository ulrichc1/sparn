# @sparn/cortex — Developer Guide
<!-- Auto-generated by Cortex v1.3.0 — 2026-02-26T22:10:54.361Z -->

**Stack**: TypeScript, Vitest, Biome, React, Commander.js CLI, SQLite (better-sqlite3), Zod validation

## Commands

- `npm run build` — `tsup`
- `npm run dev` — `tsup --watch`
- `npm run test` — `vitest run`
- `npm run lint` — `biome check .`
- `npm run typecheck` — `tsc --noEmit`

## Entry Points

- `src/index.ts` — Library API
- `src/cli/index.ts` — CLI entry point
- `src/daemon/index.ts` — Daemon process
- `src/mcp/index.ts` — MCP server

## Structure

### src/adapters/ (2 files)
- `claude-code.ts` (195L)
- `generic.ts` (131L)

### src/cli/ (31 files)
- `config.ts` (329L)
- `consolidate.ts` (78L)
- `debt.ts` (140L)
- `docs.ts` (57L)
- `exec.ts` (47L)
- `graph.ts` (85L)
- `hooks.ts` (344L)
- `init.ts` (143L)
- ... and 23 more

### src/core/ (15 files)
- `btsp-embedder.ts` (104L)
- `budget-pruner.ts` (203L)
- `confidence-states.ts` (100L)
- `context-pipeline.ts` (215L)
- `debt-tracker.ts` (266L)
- `dependency-graph.ts` (430L)
- `docs-generator.ts` (273L)
- `engram-scorer.ts` (117L)
- ... and 7 more

### src/daemon/ (5 files)
- `consolidation-scheduler.ts` (246L)
- `daemon-process.ts` (324L)
- `file-tracker.ts` (155L)
- `index.ts` (173L)
- `session-watcher.ts` (407L)

### src/hooks/ (4 files)
- `dashboard-stats.ts` (188L)
- `post-tool-result.ts` (220L)
- `pre-prompt.ts` (155L)
- `stop-docs-refresh.ts` (180L)

### src/ (1 files)
- `index.ts` (141L)

### src/mcp/ (2 files)
- `index.ts` (62L)
- `server.ts` (381L)

### src/types/ (5 files)
- `adapter.ts` (74L)
- `config.ts` (150L)
- `consolidate.ts` (47L)
- `memory.ts` (78L)
- `pruner.ts` (24L)

### src/utils/ (6 files)
- `audio.ts` (57L)
- `context-parser.ts` (256L)
- `hash.ts` (23L)
- `logger.ts` (42L)
- `tfidf.ts` (127L)
- `tokenizer.ts` (67L)

## Hot Dependencies (most imported)

- `src/core/kv-memory.ts` (imported by 18 modules)
- `src/utils/tokenizer.ts` (imported by 12 modules)
- `src/types/config.ts` (imported by 10 modules)
- `src/cli/dashboard/theme.ts` (imported by 8 modules)
- `src/core/dependency-graph.ts` (imported by 7 modules)

**Orphaned files** (12): benchmarks/run-all.js, src/hooks/stop-docs-refresh.ts, src/types/adapter.ts...

**Total tokens**: 171 305 | **Hot path tokens**: 13 763

## Cortex Optimization

Cortex is active in this project. Key features:
- Context optimization (60-70% token reduction)
- Use `cortex search` before reading files
- Use `cortex graph` to understand dependencies
- Use `cortex plan` for planning, `cortex exec` for execution
